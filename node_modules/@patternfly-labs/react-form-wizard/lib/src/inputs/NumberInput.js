import { jsx as _jsx } from "react/jsx-runtime";
import { NumberInput as PFNumberInput } from '@patternfly/react-core';
import { Fragment, useCallback } from 'react';
import { TextDetail } from '..';
import { DisplayMode } from '../contexts/DisplayModeContext';
import { lowercaseFirst, useInput } from './Input';
import { InputLabel } from './InputLabel';
export function NumberInput(props) {
    const { displayMode: mode, value, setValue, disabled, hidden, id } = useInput(props);
    const onMinus = useCallback(() => {
        const newValue = typeof value === 'number' ? value - 1 : 0;
        if (props.zeroIsUndefined && newValue === 0) {
            setValue(undefined);
        }
        else {
            setValue(newValue);
        }
    }, [props.zeroIsUndefined, setValue, value]);
    const onChange = useCallback((event) => {
        const newValue = Number(event.target.value);
        if (props.zeroIsUndefined && newValue === 0) {
            setValue(undefined);
        }
        else {
            if (Number.isInteger(newValue))
                setValue(newValue);
        }
    }, [props.zeroIsUndefined, setValue]);
    const onPlus = useCallback(() => {
        if (typeof value === 'number')
            setValue(value + 1);
        else
            setValue(1);
    }, [setValue, value]);
    if (hidden)
        return _jsx(Fragment, {}, void 0);
    if (mode === DisplayMode.Details) {
        if (!value)
            return _jsx(Fragment, {}, void 0);
        return _jsx(TextDetail, { id: id, path: props.path, label: props.label }, void 0);
    }
    const placeholder = props.placeholder ?? `Enter the ${lowercaseFirst(props.label)}`;
    return (_jsx(InputLabel, { ...props, id: id, children: _jsx(PFNumberInput, { id: id, placeholder: placeholder, value: value, onMinus: onMinus, onChange: onChange, onPlus: onPlus, min: props.min === undefined ? 0 : props.min, max: props.max, isDisabled: disabled }, void 0) }, void 0));
}
//# sourceMappingURL=NumberInput.js.map